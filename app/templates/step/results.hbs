<h1 class='title'>Results & Analysis</h1>

<div class='wrapper'>
  <p>Analyzing 
  {{select-2
    content=metrics
    value=metric
    optionLabelPath='name'
    optionValuePath='id'
    searchEnabled=false
  }}
  </p>
</div>

<div class='wrapper'>
  <div class='left-2'>
    <h2>Goodwill</h2>
    <div {{bind-attr
    class=':goodwill totalGoodwillIsPositive:positive:negative'}}>
      {{absTotalGoodwill}}
    </div>
  </div>
  <div class='right-1'>
    <h2>Top Reviewers</h2>
    {{#each reviewer in topReviewers}}
      <p>{{reviewer.username}} - {{reviewer.points}}</p>
    {{/each}}
  </div>
</div>

<div class="wrapper">
  {{time-series-chart
    lineData=goodwillOverTime
  }}
</div>

<div class="wrapper">
  <p>
    Large pull requests: You authored
    <span class='inline-positive'>{{prSizeStats.large.negative}}</span>
    and reviewed
    <span class='inline-negative'>{{prSizeStats.large.positive}}</span>.
  </p>
  <p>
    Small pull requests: You authored
    <span class='inline-positive'>{{prSizeStats.small.negative}}</span>
    and reviewed
    <span class='inline-negative'>{{prSizeStats.small.positive}}</span>.
  </p>
</div>

{{#each stat in stats}}
  <a target='_blank' {{bind-attr href='stat.htmlUrl'}} class='pr-stat'>
    <div class='left-1'>
      <div {{bind-attr class=':loc stat.isPositive:positive:negative'}}>
        {{#if metricIsScore}}
          {{stat.score}}
        {{else}}
          {{#if metricIsNum}}
            {{stat.num}}
          {{else}}
            {{stat.loc}}
          {{/if}}
        {{/if}}
      </div>
    </div>
    <div class='right-2'>
      {{#if stat.isPositive}}
        <h4>You reviewed a pull request by {{stat.author}}</h4>
      {{else}}
        <h4>{{stat.formattedReviewers}} reviewed your pull request</h4>
      {{/if}}
      <h4>{{stat.formattedDate}} in {{stat.repoName}}</h4>
    </div>
  </a>
{{/each}}

<div class='button-block'>
  {{link-to 'Back' 'step.repositories' class='back-btn'}}
  {{link-to 'Home' 'index' class='home-btn'}}
</div>
